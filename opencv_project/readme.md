# RIM任务report
## 任务一：识别装甲板图片并做仿射变换切换角度：
### 基本思路：批量读取图片之后转换颜色空间为hsv，定义红色（灯带颜色的hsv），创建掩码，采用高斯滤波去除噪点（卷积核在5左右效果最佳），查找图片中灯带轮廓，定位包围框，筛选包围框（面积最大的留下，其余全部清除）采用仿射变换方法对图片进行处理，将输出结果以“原名_adjusted”批量保存在同一路径的新建文件夹下
## 任务二：识别视频中的装甲板并框出灯带：
### 基本思路：读取视频之后转换颜色空间为hsv，定义灯带颜色，创建掩码，提取颜色范围之中的像素，进行二值化、高斯滤波（卷积核定义在21-25之间效果最佳）和边缘检测确定大致的灯带位置，进行一定的误差排除，将最终结果应用在###输出视频中，在输出结果中同时展示原视频和修改之后的视频
## 任务三：摄像头stream中的装甲板跟踪及预测—基于卡尔曼滤波（选做）（还没啥头绪）
#### tips：
##### 1.为啥用hsv不用bgr，因为灯带是发光体有光晕和光圈，使用hsv（色相、饱和度、明度）更容易区分装甲板灯带和环境元素
##### 2.为啥采用高斯滤波：去除噪点，具体数学原理不知道，但是可以让识别结果更准确，至少不会锁着锁着到别的地方去了
##### 3.二值化处理：识别目标是规则形状的装甲板（基于规则形状灯带），采用二值化简化图像复杂度，减少计算误差，可以更容易识别灯带
##### 4.如何实现的角度变化：采用仿射变换方法，任务里没给角度所以就随便朝向了一个方向
##### 5.误差分析：
#### 在图片检测中
##### 1.图四锁定到了红色积木之上，判断是颜色检测标准过于宽泛，中途有考虑过将颜色识别改为“中间为两红色，两头略有变暗”的识别条件，但是修改后效果不佳（一大半图片都锁到了地毯上红色的投影）
##### 2.卷积核大小不能太大，不然可能出现检测不到红色区域的情况，导致变量空置程序报错，但是卷积核太小会增加噪点，所以考虑到了保留面积最大项来暴力清楚噪点，带来新的问题：图四红色积木面积太大难以和灯带区别
##### 3.可能的解决方案：再思考下红光灯带和普通红色的区别（颜色饱和度啥的），优化装甲板识别的筛选过程（不是只保留面积最的的红色区域，而是选择所有平行的红色矩形，保留这些矩形并将其中所有区域合并，至此可以由灯带扩展成整块装甲板，不过这个过程之前的灯带识别过程需要更加精细，不然识别不全会导致结果出现极大偏差	
#### 在视频检测中
##### 1.仍然出现了很多噪点，需要采用新的噪点过滤方案（不知道为什么高斯滤波卷积核拉到25以上的时候原本完整的灯带框会在某些时候破碎成很多小框）
##### 2.视频展示的时候原方案是origin_version & Armor_detection，一起展示，不知道为什么只会弹出一个窗口，手动关闭一个窗口之后又会弹出两个窗口，不过无关任务，只是影响到了观感，删除也可以，或者干脆丢给gpt来修
